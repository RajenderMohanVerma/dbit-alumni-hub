<!-- filepath: d:\RajenderMohan_BCA\RajenderMohan_Projects\6_Semester\Major Project\Alumni App\templates\change_password.html -->
{% extends "base.html" %}

{% block content %}
<div class="password-page-wrapper overflow-hidden bg-slate-50">
    <!-- Ambient Background Effects -->
    <div class="ambient-visuals">
        <div class="glow-orb orb-primary"></div>
        <div class="glow-orb orb-secondary"></div>
    </div>

    <div class="container py-5 min-vh-100 d-flex align-items-center justify-content-center position-relative"
        style="z-index: 10;">
        <div class="row w-100 justify-content-center">
            <div class="col-lg-5 col-md-8">
                <!-- Staggered Entry Container -->
                <div class="reveal-container">
                    <div class="glass-password-card shadow-3xl p-4 p-md-5 reveal-item-1">
                        <!-- Card Header -->
                        <div class="text-center mb-5">
                            <div class="icon-circle bg-danger-soft text-danger mb-3 mx-auto shadow-sm">
                                <i class="fas fa-lock animate-pulse"></i>
                            </div>
                            <h2 class="fw-bold text-slate-900">Secure Update</h2>
                            <p class="text-muted">Change your account password below</p>
                        </div>

                        <!-- Security Alert -->
                        <div class="security-toast mb-4 d-flex align-items-center p-3 rounded-4 animate-item-2"
                            style="background: rgba(220, 53, 69, 0.05); border: 1px solid rgba(220, 53, 69, 0.1);">
                            <div class="me-3 fs-4 text-danger">
                                <i class="fas fa-shield-halved"></i>
                            </div>
                            <div class="small">
                                <span class="fw-bold text-danger d-block">Security First</span>
                                <span class="text-muted">Strong passwords use mixed cases & symbols.</span>
                            </div>
                        </div>

                        <form method="POST" class="needs-validation reveal-item-3">
                            <!-- Current Password -->
                            <div class="form-floating-custom mb-4">
                                <label for="old_password" class="custom-label">Current Password</label>
                                <div class="premium-input-group">
                                    <div class="input-icon"><i class="fas fa-key"></i></div>
                                    <input type="password" class="form-control premium-input" id="old_password"
                                        name="old_password" required placeholder="••••••••">
                                    <button class="btn-toggle" type="button" onclick="togglePassword('old_password')">
                                        <i class="fas fa-eye" id="eye-old_password"></i>
                                    </button>
                                </div>
                            </div>

                            <div class="divider mb-4"><span class="px-2 bg-transparent text-muted small">SET NEW
                                    CREDENTIALS</span></div>

                            <!-- New Password -->
                            <div class="form-floating-custom mb-4">
                                <label for="new_password" class="custom-label">New Password</label>
                                <div class="premium-input-group">
                                    <div class="input-icon"><i class="fas fa-fingerprint"></i></div>
                                    <input type="password" class="form-control premium-input" id="new_password"
                                        name="new_password" required placeholder="Minimal 6 characters" minlength="6">
                                    <button class="btn-toggle" type="button" onclick="togglePassword('new_password')">
                                        <i class="fas fa-eye" id="eye-new_password"></i>
                                    </button>
                                </div>
                                <div class="password-gauge-container mt-2" style="display: none;">
                                    <div class="gauge-track">
                                        <div class="gauge-fill" id="strengthBar"></div>
                                    </div>
                                    <div class="d-flex justify-content-between mt-1">
                                        <small id="strengthText" class="text-muted fw-semi-bold">Enter secret...</small>
                                        <small class="text-muted">Security Level</small>
                                    </div>
                                </div>
                            </div>

                            <!-- Confirm Password -->
                            <div class="form-floating-custom mb-5">
                                <label for="confirm_password" class="custom-label">Confirm Password</label>
                                <div class="premium-input-group">
                                    <div class="input-icon"><i class="fas fa-shield-check"></i></div>
                                    <input type="password" class="form-control premium-input" id="confirm_password"
                                        name="confirm_password" required placeholder="Repeat matching password"
                                        minlength="6">
                                    <button class="btn-toggle" type="button"
                                        onclick="togglePassword('confirm_password')">
                                        <i class="fas fa-eye" id="eye-confirm_password"></i>
                                    </button>
                                </div>
                            </div>

                            <!-- Action Buttons -->
                            <div class="d-grid gap-3">
                                <button type="submit"
                                    class="btn-premium-action py-3 rounded-pill fw-bold text-white mb-2">
                                    <span class="btn-content">
                                        <i class="fas fa-sync-alt me-2"></i>Update Password
                                    </span>
                                </button>
                                <a href="{{ url_for('profile') }}"
                                    class="btn-premium-cancel py-3 rounded-pill fw-bold text-muted text-center text-decoration-none">
                                    Return to Profile
                                </a>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    /* PREMIUM DESIGN SYSTEM */
    :root {
        --danger-gradient: linear-gradient(135deg, #ff416c, #ff4b2b);
        --glass-white: rgba(255, 255, 255, 0.85);
        --slate-text: #1e293b;
    }

    .password-page-wrapper {
        min-height: 100vh;
        background: #f1f5f9;
        position: relative;
        font-family: 'Poppins', sans-serif;
    }

    /* Ambient Visuals */
    .ambient-visuals {
        position: absolute;
        inset: 0;
        pointer-events: none;
        z-index: 1;
    }

    .glow-orb {
        position: absolute;
        width: 600px;
        height: 600px;
        border-radius: 50%;
        filter: blur(140px);
        opacity: 0.3;
        animation: orbMove 25s infinite alternate;
    }

    .orb-primary {
        background: radial-gradient(circle, #ff416c22, transparent);
        top: -20%;
        left: -10%;
    }

    .orb-secondary {
        background: radial-gradient(circle, #4f46e522, transparent);
        bottom: -10%;
        right: -10%;
        animation-delay: -5s;
    }

    /* Glass Card */
    .glass-password-card {
        background: var(--glass-white);
        backdrop-filter: blur(25px);
        -webkit-backdrop-filter: blur(25px);
        border: 1px solid rgba(255, 255, 255, 0.6);
        border-radius: 35px;
        box-shadow: 0 40px 100px rgba(0, 0, 0, 0.08);
    }

    /* Icon Design */
    .icon-circle {
        width: 70px;
        height: 70px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.8rem;
    }

    .bg-danger-soft {
        background: rgba(220, 53, 69, 0.1);
    }

    /* Premium Inputs */
    .custom-label {
        display: block;
        font-size: 0.85rem;
        font-weight: 700;
        color: #64748b;
        margin-bottom: 8px;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .premium-input-group {
        position: relative;
        display: flex;
        align-items: center;
        background: #f8fafc;
        border: 2px solid transparent;
        border-radius: 16px;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.02);
    }

    .premium-input-group:focus-within {
        border-color: #ff416c;
        background: #fff;
        box-shadow: 0 10px 25px rgba(255, 65, 108, 0.1);
    }

    .premium-input {
        border: none !important;
        background: transparent !important;
        box-shadow: none !important;
        padding: 14px 16px !important;
        font-weight: 500;
        color: var(--slate-text);
    }

    .input-icon {
        padding-left: 20px;
        color: #94a3b8;
        font-size: 1.1rem;
    }

    .btn-toggle {
        background: transparent;
        border: none;
        padding: 0 20px;
        color: #94a3b8;
        transition: color 0.3s;
    }

    .btn-toggle:hover {
        color: #ff416c;
    }

    /* Strength Gauge */
    .gauge-track {
        height: 6px;
        background: #e2e8f0;
        border-radius: 10px;
        overflow: hidden;
    }

    .gauge-fill {
        height: 100%;
        width: 0;
        transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }

    /* Actions */
    .btn-premium-action {
        background: var(--danger-gradient);
        border: none;
        position: relative;
        overflow: hidden;
        transition: all 0.4s;
    }

    .btn-premium-action:hover {
        transform: translateY(-5px) scale(1.02);
        box-shadow: 0 20px 40px rgba(255, 65, 108, 0.3);
    }

    .btn-premium-cancel {
        background: #f1f5f9;
        transition: all 0.3s;
    }

    .btn-premium-cancel:hover {
        background: #e2e8f0;
        color: #0f172a !important;
    }

    /* Animations */
    .reveal-item-1 {
        animation: fadeInScale 0.8s cubic-bezier(0.23, 1, 0.32, 1) forwards;
    }

    .reveal-item-3 {
        animation: fadeInUp 0.8s cubic-bezier(0.23, 1, 0.32, 1) 0.2s backwards;
    }

    @keyframes fadeInScale {
        from {
            opacity: 0;
            transform: scale(0.95) translateY(20px);
        }

        to {
            opacity: 1;
            transform: scale(1) translateY(0);
        }
    }

    @keyframes fadeInUp {
        from {
            opacity: 0;
            transform: translateY(30px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    @keyframes orbMove {
        from {
            transform: translate(0, 0) scale(1);
        }

        to {
            transform: translate(100px, 50px) scale(1.1);
        }
    }

    .animate-pulse {
        animation: pulseIcon 2s infinite;
    }

    @keyframes pulseIcon {

        0%,
        100% {
            transform: scale(1);
            opacity: 1;
        }

        50% {
            transform: scale(1.1);
            opacity: 0.8;
        }
    }

    .divider {
        display: flex;
        align-items: center;
        text-align: center;
    }

    .divider::before,
    .divider::after {
        content: '';
        flex: 1;
        border-bottom: 1px solid #e2e8f0;
    }

    @media (max-width: 576px) {
        .glass-password-card {
            border-radius: 25px;
            padding: 30px 20px !important;
        }
    }
</style>

<script>
    function togglePassword(inputId) {
        const input = document.getElementById(inputId);
        const icon = document.getElementById('eye-' + inputId);
        if (input.type === 'password') {
            input.type = 'text';
            icon.classList.replace('fa-eye', 'fa-eye-slash');
        } else {
            input.type = 'password';
            icon.classList.replace('fa-eye-slash', 'fa-eye');
        }
    }

    document.getElementById('new_password').addEventListener('input', function () {
        const container = document.querySelector('.password-gauge-container');
        const bar = document.getElementById('strengthBar');
        const text = document.getElementById('strengthText');
        const password = this.value;

        if (password.length === 0) {
            container.style.display = 'none';
            return;
        }

        container.style.display = 'block';
        let strength = 0;

        if (password.length >= 6) strength += 20;
        if (password.length >= 10) strength += 20;
        if (/[A-Z]/.test(password)) strength += 20;
        if (/[0-9]/.test(password)) strength += 20;
        if (/[^A-Za-z0-9]/.test(password)) strength += 20;

        let color = '#ef4444';
        let label = 'Very Weak';

        if (strength > 20) { color = '#f59e0b'; label = 'Weak'; }
        if (strength > 40) { color = '#facc15'; label = 'Fair'; }
        if (strength > 60) { color = '#3b82f6'; label = 'Good'; }
        if (strength > 80) { color = '#10b981'; label = 'Ultimate'; }

        bar.style.width = strength + '%';
        bar.style.backgroundColor = color;
        text.textContent = label;
        text.style.color = color;

        if (strength > 80) text.classList.add('animate__animated', 'animate__flash');
    });
</script>
{% endblock %}