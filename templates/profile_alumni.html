<!-- filepath: d:\RajenderMohan_BCA\RajenderMohan_Projects\6_Semester\Major Project\Alumni App\templates\profile_alumni.html -->
{% extends "base.html" %}

{% block content %}
<div class="profile-extreme-wrapper overflow-hidden bg-slate-50">
    <!-- Ambient Background Lighting -->
    <div class="ambient-light">
        <div class="glow-orb orb-1"></div>
        <div class="glow-orb orb-2"></div>
        <div class="glow-orb orb-3"></div>
    </div>

    <!-- Ultra Hero Section -->
    <div class="profile-hero-extreme"
        style="background: #0f172a; padding: 120px 0; min-height: 55vh; position: relative; overflow: hidden;">
        <div class="hero-aurora"></div>

        <div class="container position-relative" style="z-index: 5;">
            <div class="row align-items-center">
                <div class="col-lg-8 text-center text-lg-start">
                    <div class="reveal-stagger">
                        <div class="badge-premium mb-4 reveal-item">
                            <span
                                class="badge rounded-pill px-4 py-2 border border-white/20 text-white shadow-xl text-shimmer-glow"
                                style="background: rgba(255,255,255,0.1); backdrop-filter: blur(15px);">
                                <i class="fas fa-crown text-warning me-2 animate-bounce"></i>
                                <span class="shimmer-text">ALUMNI ELITE</span>
                            </span>
                        </div>
                        <h1 class="display-2 fw-bold text-white mb-3 reveal-item name-typing-advanced">
                            <span class="text-gradient-extreme">{{ user['name'] }}</span>
                        </h1>
                        <p class="lead text-indigo-200 reveal-item fs-4"
                            style="text-shadow: 0 4px 15px rgba(0,0,0,0.4);">
                            <span class="glass-reveal-text">
                                <i class="fas fa-user-graduate me-2 text-indigo-400"></i>Batch of {{
                                profile['pass_year'] }}
                                <span class="mx-3 text-white/30">|</span>
                                <i class="fas fa-microchip me-2 text-indigo-400"></i>{{ profile['department'] }}
                            </span>
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Animated Wave Separation -->
        <div class="hero-wave-container">
            <svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
                viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto">
                <defs>
                    <path id="gentle-wave"
                        d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z" />
                </defs>
                <g class="parallax">
                    <use xlink:href="#gentle-wave" x="48" y="0" fill="rgba(248,250,252,0.7)" />
                    <use xlink:href="#gentle-wave" x="48" y="3" fill="rgba(248,250,252,0.5)" />
                    <use xlink:href="#gentle-wave" x="48" y="5" fill="rgba(248,250,252,0.3)" />
                    <use xlink:href="#gentle-wave" x="48" y="7" fill="#f8fafc" />
                </g>
            </svg>
        </div>
    </div>

    <!-- Interactive Data Content -->
    <div class="container" style="margin-top: -100px; position: relative; z-index: 10; padding-bottom: 80px;">
        <div class="row g-5">
            <!-- Sidebar: Identity Card -->
            <div class="col-lg-4">
                <div class="tilt-card-wrapper" data-tilt>
                    <div class="extreme-profile-card shadow-3xl p-5 text-center">
                        <div class="avatar-magnetic-container mb-4">
                            <div class="avatar-ring"></div>
                            <div class="profile-avatar-xl shadow-2xl mx-auto">
                                {% if user['profile_pic'] and user['profile_pic'].startswith('/') %}
                                <img src="{{ user['profile_pic'] }}" alt="Avatar" class="avatar-img-extreme">
                                {% else %}
                                <img src="https://ui-avatars.com/api/?name={{ user['name'] }}&size=250&background=0f172a&color=fff"
                                    class="avatar-img-extreme">
                                {% endif %}
                                <div class="online-indicator"></div>
                            </div>
                        </div>

                        <h2 class="fw-bold text-slate-900 mb-1">{{ user['name'] }}</h2>
                        <div class="professional-tag mb-4">Professional Alumni</div>

                        <!-- Stats Row -->
                        <div class="row g-2 mb-4">
                            <div class="col-6">
                                <div class="mini-glass-stat p-3 rounded-4">
                                    <h4 class="mb-0 fw-bold text-indigo-600">{{ profile['pass_year'] }}</h4>
                                    <p class="mb-0 text-muted small uppercase tracking-widest">Year</p>
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="mini-glass-stat p-3 rounded-4">
                                    <h4 class="mb-0 fw-bold text-emerald-600">{{ profile['experience_years'] or 0 }}+
                                    </h4>
                                    <p class="mb-0 text-muted small uppercase tracking-widest">Exp</p>
                                </div>
                            </div>
                        </div>

                        <!-- Professional Info Sidebar -->
                        {% if profile['company_name'] %}
                        <div class="info-strip mb-4 transition-all">
                            <div class="d-flex align-items-center p-3 bg-indigo-50 rounded-4 mb-2">
                                <div class="icon-sq bg-indigo-600 shadow-indigo me-3"><i
                                        class="fas fa-building text-white"></i></div>
                                <div class="text-start">
                                    <small class="text-muted d-block line-height-1">Company</small>
                                    <span class="fw-bold text-slate-800">{{ profile['company_name'] }}</span>
                                </div>
                            </div>
                            <div class="d-flex align-items-center p-3 bg-emerald-50 rounded-4">
                                <div class="icon-sq bg-emerald-600 shadow-emerald me-3"><i
                                        class="fas fa-briefcase text-white"></i></div>
                                <div class="text-start">
                                    <small class="text-muted d-block line-height-1">Role</small>
                                    <span class="fw-bold text-slate-800">{{ profile['designation'] }}</span>
                                </div>
                            </div>
                        </div>
                        {% endif %}

                        <!-- Action Controls -->
                        <div class="d-grid gap-3">
                            {% if current_user.id == user['id'] %}
                            <a href="{{ url_for('edit_alumni_profile', user_id=user['id']) }}"
                                class="btn-extreme-primary shadow-indigo py-3 rounded-pill">
                                <i class="fas fa-sparkles me-2"></i>Enhance Profile
                            </a>
                            {% else %}
                            <button id="connection-btn" class="btn-extreme-pulse shadow-emerald py-3 rounded-pill"
                                onclick="sendExtremeConnection({{ user['id'] }})">
                                <i class="fas fa-user-plus me-2"></i>Send Request
                            </button>
                            <button type="button" class="btn-extreme-outline py-3 rounded-pill mt-2 w-100"
                                data-bs-toggle="modal" data-bs-target="#emailModal">
                                <i class="fas fa-envelope me-2 text-indigo-600"></i>Send Email
                            </button>
                            {% endif %}

                            {% if profile['linkedin_url'] %}
                            <a href="{{ profile['linkedin_url'] }}" target="_blank"
                                class="btn-extreme-outline py-3 rounded-pill">
                                <i class="fab fa-linkedin me-2 text-indigo-600"></i>LinkedIn Profile
                            </a>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>

            <!-- Main Content Area -->
            <div class="col-lg-8">
                <!-- Bio Section with Glass Quote -->
                <div class="section-reveal mb-5 card-interactive">
                    <div class="extreme-glass-section p-5 rounded-6 shadow-xl border-t-glow">
                        <div class="header-section mb-4">
                            <span class="badge bg-indigo-100 text-indigo-800 px-3 py-1 mb-2 rounded-pill fw-bold">ABOUT
                                ME</span>
                            <h3 class="fw-bold text-slate-900 d-flex align-items-center">
                                Professional Journey <i class="fas fa-bolt ms-3 text-warning"></i>
                            </h3>
                        </div>
                        <p class="bio-text-glow lead text-slate-600 italic">
                            "{{ profile['bio'] or "Passionate professional sharing industry expertise and mentoring the
                            next generation of talent." }}"
                        </p>
                    </div>
                </div>

                <!-- Expertise & Academics Grid -->
                <div class="row g-4 mb-5">
                    <div class="col-md-6 section-reveal">
                        <div class="interactive-info-card academics-card p-4 rounded-6 shadow-lg h-100">
                            <div class="card-icon mb-3 academics-bg"><i class="fas fa-award"></i></div>
                            <h4 class="fw-bold mb-4">Academic Roots</h4>
                            <div class="data-entry mb-3">
                                <label>Department</label>
                                <div class="data-value">{{ profile['department'] }}</div>
                            </div>
                            <div class="data-entry">
                                <label>Degree Specialization</label>
                                <div class="data-value">{{ profile['degree'] }}</div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 section-reveal">
                        <div class="interactive-info-card professional-card p-4 rounded-6 shadow-lg h-100">
                            <div class="card-icon mb-3 professional-bg"><i class="fas fa-rocket"></i></div>
                            <h4 class="fw-bold mb-4">Industry Pulse</h4>
                            <div class="data-entry mb-3">
                                <label>Active Base</label>
                                <div class="data-value text-emerald-600">{{ profile['work_location'] or "Worldwide" }}
                                </div>
                            </div>
                            <div class="experience-milestone mt-2">
                                <div class="d-flex justify-content-between mb-1">
                                    <span class="small fw-bold">Experience Milestone</span>
                                    <span class="small fw-bold">{{ profile['experience_years'] or 0 }}Y / 30Y</span>
                                </div>
                                <div class="ext-progress">
                                    <div class="progress-fill"
                                        style="width: {{ (profile['experience_years']|int / 30 * 100)|int }}%"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Achievements Showcase -->
                {% if profile['achievements'] %}
                <div
                    class="section-reveal section-achievements p-5 rounded-6 shadow-2xl bg-white border border-slate-100">
                    <div class="d-flex align-items-center justify-content-between mb-5">
                        <h3 class="fw-bold text-slate-900 mb-0">Notable Milestones</h3>
                        <div class="milestone-counter">
                            <i class="fas fa-trophy text-warning"></i>
                        </div>
                    </div>
                    <div class="row g-4">
                        {% for achievement in profile['achievements'].split('|') %}
                        <div class="col-12">
                            <div class="achievement-row p-4 rounded-5 border-l-ext transition-all hover-scale-sm">
                                <div class="row align-items-center">
                                    <div class="col-auto">
                                        <div class="badge-ring"><i class="fas fa-medal"></i></div>
                                    </div>
                                    <div class="col">
                                        <h5 class="fw-bold mb-0 text-slate-800">{{ achievement.strip() }}</h5>
                                        <small class="text-muted">Verified Community Milestone</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>
</div>

<!-- Email Modal -->
<div class="modal fade" id="emailModal" tabindex="-1" aria-hidden="true" style="z-index: 100000;">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content glass-card border-0" style="background: rgba(255, 255, 255, 0.95);">
            <div class="modal-header border-0">
                <h5 class="modal-title fw-bold">Send Email to {{ user['name'] }}</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form action="/send-email" method="POST">
                    <input type="hidden" name="recipient_email" value="{{ user['email'] }}">
                    <div class="mb-3">
                        <label class="form-label text-muted small fw-bold">Subject</label>
                        <input type="text" name="subject" class="form-control rounded-3" required>
                    </div>
                    <div class="mb-3">
                        <label class="form-label text-muted small fw-bold">Message</label>
                        <textarea name="message" class="form-control rounded-3" rows="5" required></textarea>
                    </div>
                    <div class="d-grid">
                        <button type="submit" class="btn btn-primary fw-bold py-2">
                            <i class="fas fa-paper-plane me-2"></i> Send Message
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<style>
    /* CSS EXTREME DESIGN SYSTEM */
    :root {
        --indigo-primary: #4f46e5;
        --emerald-primary: #10b981;
        --slate-900: #0f172a;
        --glass-bg: rgba(255, 255, 255, 0.85);
    }

    .profile-extreme-wrapper {
        background: #f8fafc;
        font-family: 'Poppins', sans-serif;
    }

    /* Ambient Lighting */
    .ambient-light {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 1;
        pointer-events: none;
    }

    .glow-orb {
        position: absolute;
        width: 50vw;
        height: 50vw;
        border-radius: 50%;
        filter: blur(120px);
        opacity: 0.4;
        animation: orbFloat 20s infinite alternate;
    }

    .orb-1 {
        top: -10%;
        left: -10%;
        background: radial-gradient(circle, rgba(79, 70, 229, 0.3), transparent);
    }

    .orb-2 {
        bottom: -10%;
        right: -10%;
        background: radial-gradient(circle, rgba(16, 185, 129, 0.3), transparent);
    }

    /* Hero Extreme */
    .hero-aurora {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: radial-gradient(circle at 70% 30%, rgba(99, 102, 241, 0.2), transparent 40%);
        opacity: 0.6;
    }

    .name-typing {
        animation: textReveal 1.2s cubic-bezier(0.23, 1, 0.32, 1) forwards;
        letter-spacing: -2px;
    }

    /* Waves */
    .hero-wave-container {
        position: absolute;
        bottom: 0;
        width: 100%;
        line-height: 0;
    }

    .waves {
        width: 100%;
        height: 70px;
    }

    .parallax>use {
        animation: move-forever 25s cubic-bezier(.55, .5, .45, .5) infinite;
    }

    .parallax>use:nth-child(1) {
        animation-delay: -2s;
        animation-duration: 7s;
    }

    .parallax>use:nth-child(2) {
        animation-delay: -3s;
        animation-duration: 10s;
    }

    .parallax>use:nth-child(3) {
        animation-delay: -4s;
        animation-duration: 13s;
    }

    .parallax>use:nth-child(4) {
        animation-delay: -5s;
        animation-duration: 20s;
    }

    /* Cards */
    .extreme-profile-card {
        background: var(--glass-bg);
        backdrop-filter: blur(25px);
        border: 1px solid rgba(255, 255, 255, 0.6);
        border-radius: 40px;
    }

    .profile-avatar-xl {
        width: 220px;
        height: 220px;
        border-radius: 50%;
        border: 10px solid white;
        position: relative;
        transition: all 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }

    .avatar-img-extreme {
        width: 100%;
        height: 100%;
        object-fit: cover;
        border-radius: 50%;
    }

    .profile-avatar-xl:hover {
        transform: rotate(3deg) scale(1.05);
    }

    /* Interactive Info Cards */
    .interactive-info-card {
        background: white;
        transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        border: 1px solid rgba(0, 0, 0, 0.03);
    }

    .interactive-info-card:hover {
        transform: translateY(-15px);
        box-shadow: 0 40px 100px rgba(0, 0, 0, 0.1);
    }

    .card-icon {
        width: 55px;
        height: 55px;
        border-radius: 18px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
        color: white;
    }

    .academics-bg {
        background: linear-gradient(135deg, #6366f1, #4f46e5);
    }

    .professional-bg {
        background: linear-gradient(135deg, #10b981, #059669);
    }

    /* Buttons Extreme */
    .btn-extreme-primary {
        background: var(--indigo-primary);
        color: white;
        border: none;
        font-weight: 700;
        transition: all 0.4s;
        position: relative;
        overflow: hidden;
        display: block;
        text-align: center;
        text-decoration: none;
    }

    .btn-extreme-pulse {
        background: var(--emerald-primary);
        color: white;
        border: none;
        font-weight: 700;
        animation: pulseEmerald 2s infinite;
        display: block;
        width: 100%;
    }

    .btn-extreme-primary:hover {
        background: #4338ca;
        transform: translateY(-3px);
    }

    /* Progress */
    .ext-progress {
        height: 8px;
        background: #e2e8f0;
        border-radius: 10px;
        overflow: hidden;
    }

    .progress-fill {
        height: 100%;
        background: linear-gradient(90deg, #10b981, #34d399);
        border-radius: 10px;
        animation: progressGrow 2s ease-out;
    }

    /* Achievement Ext */
    .achievement-row {
        background: #f8fafc;
        border-left: 6px solid #f59e0b;
    }

    .badge-ring {
        width: 45px;
        height: 45px;
        border-radius: 50%;
        border: 3px solid #f59e0b;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #f59e0b;
        font-size: 1.2rem;
    }

    /* Animations Keyframes */
    @keyframes orbFloat {
        from {
            transform: translate(0, 0) scale(1);
        }

        to {
            transform: translate(100px, 50px) scale(1.2);
        }
    }

    @keyframes textReveal {
        from {
            opacity: 0;
            transform: translateY(30px);
            filter: blur(10px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
            filter: blur(0);
        }
    }

    @keyframes move-forever {
        0% {
            transform: translate3d(-90px, 0, 0);
        }

        100% {
            transform: translate3d(85px, 0, 0);
        }
    }

    @keyframes pulseEmerald {
        0% {
            box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.7);
        }

        70% {
            box-shadow: 0 0 0 20px rgba(16, 185, 129, 0);
        }

        100% {
            box-shadow: 0 0 0 0 rgba(16, 185, 129, 0);
        }
    }

    @keyframes progressGrow {
        from {
            width: 0;
        }
    }

    /* Advanced Text Animations */
    .shimmer-text {
        background: linear-gradient(90deg, #fff 0%, #a5b4fc 50%, #fff 100%);
        background-size: 200% auto;
        color: transparent;
        -webkit-background-clip: text;
        background-clip: text;
        animation: shine 3s linear infinite;
        font-weight: 800;
        letter-spacing: 2px;
    }

    @keyframes shine {
        to {
            background-position: 200% center;
        }
    }

    .name-typing-advanced {
        animation: reveal-and-glow 1.5s cubic-bezier(0.77, 0, 0.175, 1) forwards;
        letter-spacing: -3px;
    }

    .text-gradient-extreme {
        background: linear-gradient(135deg, #fff 0%, #818cf8 50%, #c084fc 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        display: inline-block;
        filter: drop-shadow(0 0 15px rgba(129, 140, 248, 0.3));
    }

    @keyframes reveal-and-glow {
        0% {
            opacity: 0;
            transform: translateY(50px) scale(0.9);
            filter: blur(20px);
            letter-spacing: 10px;
        }

        100% {
            opacity: 1;
            transform: translateY(0) scale(1);
            filter: blur(0);
            letter-spacing: -3px;
        }
    }

    .glass-reveal-text {
        opacity: 0;
        animation: fadeInSlide 1s ease-out 0.8s forwards;
    }

    @keyframes fadeInSlide {
        0% {
            opacity: 0;
            transform: translateX(-20px);
            filter: blur(5px);
        }

        100% {
            opacity: 1;
            transform: translateX(0);
            filter: blur(0);
        }
    }

    .text-shimmer-glow {
        position: relative;
        overflow: hidden;
    }

    .text-shimmer-glow::after {
        content: '';
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: linear-gradient(45deg,
                transparent,
                rgba(255, 255, 255, 0.1),
                transparent);
        transform: rotate(45deg);
        animation: reflection 4s infinite linear;
    }

    @keyframes reflection {
        0% {
            transform: translateX(-100%) rotate(45deg);
        }

        100% {
            transform: translateX(100%) rotate(45deg);
        }
    }

    /* Utils */
    .line-height-1 {
        line-height: 1.2;
    }

    .fs-4 {
        font-size: 1.5rem;
    }

    .text-indigo-200 {
        color: #c7d2fe;
    }

    .italic {
        font-style: italic;
    }

    .mb-0 {
        margin-bottom: 0 !important;
    }

    .data-value {
        font-size: 1.25rem;
        font-weight: 700;
        color: #1e293b;
    }

    .data-entry label {
        font-size: 0.85rem;
        color: #64748b;
        text-transform: uppercase;
        letter-spacing: 0.5px;
    }

    .rounded-6 {
        border-radius: 35px;
    }

    /* Tilt Logic */
    .tilt-card-wrapper {
        transform-style: preserve-3d;
    }
</style>

<script src="https://cdnjs.cloudflare.com/ajax/libs/vanilla-tilt/1.7.0/vanilla-tilt.min.js"></script>
<script>
    // Initialize 3D Tilt
    VanillaTilt.init(document.querySelectorAll(".tilt-card-wrapper"), {
        max: 5,
        speed: 400,
        glare: true,
        "max-glare": 0.2,
    });

    // Extreme Connection Logic
    async function sendExtremeConnection(receiverId) {
        const btn = document.getElementById('connection-btn');
        btn.disabled = true;
        btn.innerHTML = '<i class="fas fa-sync fa-spin me-2"></i>Link in progress...';

        try {
            const response = await fetch('/api/connection-request/send', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ receiver_id: receiverId })
            });
            const data = await response.json();

            if (data.success) {
                btn.className = "btn w-100 py-3 rounded-pill bg-emerald-600 text-white fw-bold shadow-lg animate__animated animate__zoomIn";
                btn.innerHTML = '<i class="fas fa-check-double me-2"></i>Network Linked';
                showExtremeToast('Network expansion successful!', 'success');
            } else {
                btn.disabled = false;
                btn.innerHTML = '<i class="fas fa-user-plus me-2"></i>Retry Connection';
                showExtremeToast(data.error || 'Gateway failed', 'danger');
            }
        } catch (err) {
            btn.disabled = false;
            btn.innerHTML = 'System Error';
        }
    }

    function showExtremeToast(msg, type) {
        const color = type === 'success' ? '#10b981' : '#ef4444';
        const toast = document.createElement('div');
        toast.className = 'position-fixed bottom-0 end-0 m-5 p-4 rounded-5 text-white shadow-2xl animate__animated animate__fadeInUp';
        toast.style.background = color;
        toast.style.zIndex = '100000';
        toast.style.minWidth = '300px';
        toast.style.backdropFilter = 'blur(10px)';
        toast.style.border = '1px solid rgba(255,255,255,0.2)';
        toast.innerHTML = `<div class="d-flex align-items-center fw-bold fs-5"><i class="fas ${type === 'success' ? 'fa-check-circle' : 'fa-circle-exclamation'} me-3"></i>${msg}</div>`;
        document.body.appendChild(toast);
        setTimeout(() => {
            toast.classList.replace('animate__fadeInUp', 'animate__fadeOutDown');
            setTimeout(() => toast.remove(), 500);
        }, 4000);
    }

    // Reveal animations on scroll
    const observerOptions = { threshold: 0.1 };
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('reveal-active');
                observer.unobserve(entry.target);
            }
        });
    }, observerOptions);

    document.querySelectorAll('.section-reveal').forEach(el => observer.observe(el));
</script>
{% endblock %}