{% extends 'base.html' %}

{% block title %}Forgot Password - DBIT Alumni Hub{% endblock %}

{% block content %}
<!-- Preload critical fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link
    href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&family=Plus+Jakarta+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;1,400&display=swap"
    rel="stylesheet">

<style>
    :root {
        --accent-indigo: #4f46e5;
        --accent-violet: #7c3aed;
        --accent-amber: #f59e0b;
        --glass-bg: rgba(255, 255, 255, 0.7);
        --glass-border: rgba(255, 255, 255, 0.4);
    }

    .forgot-page-wrapper {
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        background: #f8fafc;
        overflow: hidden;
        padding: 2rem;
    }

    /* Premium Animation Background */
    .bg-animation {
        position: absolute;
        width: 100%;
        height: 100%;
        top: 0;
        left: 0;
        z-index: 0;
    }

    .orb {
        position: absolute;
        border-radius: 50%;
        filter: blur(120px);
        opacity: 0.15;
        animation: floatOrb 20s infinite alternate ease-in-out;
    }

    .orb-1 {
        width: 400px;
        height: 400px;
        background: var(--accent-indigo);
        top: -100px;
        left: -100px;
    }

    .orb-2 {
        width: 350px;
        height: 350px;
        background: var(--accent-violet);
        bottom: -100px;
        right: -100px;
        animation-delay: -5s;
    }

    .orb-3 {
        width: 300px;
        height: 300px;
        background: var(--accent-amber);
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        opacity: 0.1;
    }

    @keyframes floatOrb {
        0% {
            transform: translate(0, 0) scale(1);
        }

        100% {
            transform: translate(100px, 50px) scale(1.1);
        }
    }

    /* Glass Card Design */
    .forgot-card {
        background: var(--glass-bg);
        backdrop-filter: blur(25px);
        -webkit-backdrop-filter: blur(25px);
        border: 1px solid var(--glass-border);
        border-radius: 40px;
        padding: 4rem;
        width: 100%;
        max-width: 520px;
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.08);
        position: relative;
        z-index: 10;
        transform: translateY(20px);
        opacity: 0;
        animation: cardAppear 0.8s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
    }

    @keyframes cardAppear {
        to {
            transform: translateY(0);
            opacity: 1;
        }
    }

    .app-logo-area {
        width: 80px;
        height: 80px;
        background: white;
        border-radius: 24px;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 2.5rem;
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.04);
        position: relative;
    }

    .icon-box {
        width: 50px;
        height: 50px;
        background: linear-gradient(135deg, var(--accent-indigo), var(--accent-violet));
        border-radius: 16px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 1.5rem;
        transform: rotate(-10deg);
        transition: 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .forgot-card:hover .icon-box {
        transform: rotate(0deg) scale(1.1);
    }

    .forgot-title {
        font-family: 'Plus Jakarta Sans', sans-serif;
        font-weight: 800;
        font-size: 2.2rem;
        color: #1e293b;
        letter-spacing: -1.5px;
        line-height: 1.1;
        margin-bottom: 1rem;
    }

    .text-holographic {
        background: linear-gradient(135deg, #4f46e5, #7c3aed, #ec4899);
        -webkit-background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
        background-size: 200% auto;
        animation: textFlow 3s linear infinite;
    }

    @keyframes textFlow {
        to {
            background-position: 200% center;
        }
    }

    .forgot-subtitle {
        color: #64748b;
        font-size: 1.05rem;
        margin-bottom: 3rem;
        line-height: 1.6;
    }

    /* Animated Form Inputs */
    .input-group-premium {
        position: relative;
        margin-bottom: 2rem;
    }

    .form-control-premium {
        background: rgba(255, 255, 255, 0.8) !important;
        border: 2px solid #e2e8f0 !important;
        border-radius: 20px !important;
        padding: 1.25rem 1.5rem 1.25rem 3.5rem !important;
        font-size: 1.05rem !important;
        font-weight: 500 !important;
        transition: 0.3s !important;
        color: #1e293b !important;
    }

    .form-control-premium:focus {
        border-color: var(--accent-indigo) !important;
        box-shadow: 0 0 0 4px rgba(79, 70, 229, 0.1) !important;
        background: white !important;
    }

    .input-icon {
        position: absolute;
        left: 1.25rem;
        top: 50%;
        transform: translateY(-50%);
        color: #94a3b8;
        font-size: 1.1rem;
        transition: 0.3s;
        z-index: 5;
    }

    .form-control-premium:focus+.input-icon {
        color: var(--accent-indigo);
    }

    /* Premium Button */
    .btn-submit-premium {
        background: linear-gradient(135deg, var(--accent-indigo), var(--accent-violet));
        color: white;
        border: none;
        padding: 1.2rem;
        border-radius: 20px;
        font-weight: 700;
        font-size: 1.1rem;
        width: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 12px;
        box-shadow: 0 15px 30px -10px rgba(79, 70, 229, 0.4);
        transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        cursor: pointer;
    }

    .btn-submit-premium:hover {
        transform: translateY(-4px) scale(1.02);
        box-shadow: 0 20px 40px -10px rgba(79, 70, 229, 0.5);
    }

    .btn-submit-premium:active {
        transform: translateY(0);
    }

    .btn-submit-premium i {
        transition: 0.4s;
    }

    .btn-submit-premium:hover i {
        transform: translateX(5px);
    }

    .back-to-login {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        margin-top: 2.5rem;
        color: #64748b;
        text-decoration: none;
        font-weight: 600;
        transition: 0.3s;
    }

    .back-to-login:hover {
        color: var(--accent-indigo);
        transform: translateX(-5px);
    }

    /* Custom Alert */
    .alert-modern {
        border-radius: 20px;
        padding: 1.25rem;
        border: none;
        background: rgba(254, 226, 226, 0.9);
        color: #991b1b;
        font-weight: 600;
        margin-bottom: 2.5rem;
        display: flex;
        align-items: center;
        gap: 12px;
        backdrop-filter: blur(10px);
    }

    .alert-success {
        background: rgba(220, 252, 231, 0.9);
        color: #166534;
    }

    /* Mobile Responsive */
    @media (max-width: 576px) {
        .forgot-card {
            padding: 2.5rem 1.5rem;
        }

        .forgot-title {
            font-size: 1.8rem;
        }
    }
</style>

<div class="forgot-page-wrapper">
    <!-- Animated Orbs -->
    <div class="bg-animation">
        <div class="orb orb-1"></div>
        <div class="orb orb-2"></div>
        <div class="orb orb-3"></div>
    </div>

    <div class="forgot-card">
        <!-- Logo/Icon Area -->
        <div class="app-logo-area">
            <div class="icon-box">
                <i class="fas fa-fingerprint"></i>
            </div>
        </div>

        <h1 class="forgot-title">Recover <span class="text-holographic">Account</span></h1>
        <p class="forgot-subtitle">Don't worry, it happens to the best of us. Enter your email and we'll send you a
            secure verification code.</p>

        <!-- Flash Messages -->
        {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
        {% for category, message in messages %}
        <div class="alert alert-modern alert-{{ category }} animate__animated animate__shakeX">
            <i
                class="fas fa-{{ 'info-circle' if category == 'danger' or category == 'warning' else 'check-circle' }}"></i>
            <span>{{ message }}</span>
        </div>
        {% endfor %}
        {% endif %}
        {% endwith %}

        <form method="POST" action="/forgot-password" id="forgotForm">
            <div class="input-group-premium">
                <input type="email" name="email" class="form-control-premium" placeholder="name@example.com" required>
                <i class="fas fa-envelope input-icon"></i>
            </div>

            <button type="submit" class="btn-submit-premium">
                <span>SEND VERIFY CODE</span>
                <i class="fas fa-arrow-right"></i>
            </button>
        </form>

        <div class="text-center">
            <a href="/login" class="back-to-login">
                <i class="fas fa-arrow-left"></i>
                Back to Login
            </a>
        </div>
    </div>
</div>

<script>
    // Smooth transition on hover for orbs
    document.addEventListener('mousemove', (e) => {
        const orbs = document.querySelectorAll('.orb');
        const x = e.clientX / window.innerWidth;
        const y = e.clientY / window.innerHeight;

        orbs.forEach((orb, index) => {
            const factor = (index + 1) * 20;
            orb.style.transform = `translate(${x * factor}px, ${y * factor}px)`;
        });
    });

    // Form submission effect
    const form = document.getElementById('forgotForm');
    const btn = form.querySelector('.btn-submit-premium');

    form.addEventListener('submit', () => {
        btn.innerHTML = '<span>SENDING...</span><i class="fas fa-spinner fa-spin"></i>';
        btn.style.opacity = '0.8';
        btn.style.pointerEvents = 'none';
    });
</script>
{% endblock %}